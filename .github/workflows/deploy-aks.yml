name: AKS Environment deployment

defaults:
  run:
    working-directory: terraform/aks  
    
on:
  workflow_dispatch:
    
jobs:
  deploy-sandbox:
    name: Sandbox
    uses: ms-us-rcg-app-innovation/aks-operational-excellence/.github/workflows/aks-deploy-template.yml@main
    with:
      environment: Sandbox
      tf_var_file: 'environment-vars/sandbox.tfvars'
    secrets: inherit
  
  deploy-development:
    name: Development
    uses:  ms-us-rcg-app-innovation/aks-operational-excellence/.github/workflows/aks-deploy-template.yml@main
    needs: deploy-sandbox
    with:      
      environment: Development
      tf_var_file: 'environment-vars/development.tfvars'
    secrets: inherit


          